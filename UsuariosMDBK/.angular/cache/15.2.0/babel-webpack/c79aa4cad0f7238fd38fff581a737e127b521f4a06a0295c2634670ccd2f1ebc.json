{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Roberth/UsuariosMDBK/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet CrearUsuarioComponent = class CrearUsuarioComponent {\n  constructor(usuariosService, fb) {\n    this.usuariosService = usuariosService;\n    this.fb = fb;\n    this.today = Date.now();\n    this.date = new Date(this.today);\n    this.editMode = false;\n    this.checkoutForm = this.fb.group({\n      id: 0,\n      nombre: \"\",\n      apellido: \"\",\n      numeroId: \"\",\n      email: \"\",\n      fechaCreacion: this.date,\n      password: \"\"\n    });\n  }\n  ngOnInit() {}\n  getDataById(id) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      //console.log(id);\n      (yield _this.usuariosService.getUsersById(id)).subscribe(resp => {\n        _this.getDataForm(resp), error => console.error(error);\n      });\n    })();\n  }\n  getDataForm(data) {\n    this.checkoutForm.patchValue({\n      id: data.id,\n      nombre: data.nombre,\n      apellido: data.apellido,\n      numeroId: data.numeroId,\n      email: data.email,\n      fechaCreacion: data.fechaCreacion,\n      password: data.password\n    });\n  }\n  onSubmit() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.usuarios.Id = _this2.checkoutForm.value.id;\n      _this2.usuarios.Nombre = _this2.checkoutForm.value.nombre;\n      _this2.usuarios.Apellido = _this2.checkoutForm.value.apellido;\n      _this2.usuarios.NumeroId = _this2.checkoutForm.value.numeroId;\n      _this2.usuarios.Email = _this2.checkoutForm.value.email;\n      _this2.usuarios.FechaCreacion = _this2.checkoutForm.value.fechaCreacion;\n      _this2.usuarios.Password = _this2.checkoutForm.value.password;\n      const data = _this2.checkoutForm.value;\n      console.log(data);\n      //Add and Update post\n      if (_this2.editMode === true) {\n        try {\n          yield _this2.usuariosService.putUsersId(_this2.usuarioId.toString(), data);\n        } catch (error) {\n          console.log(error);\n          alert(\"Update Failed\");\n        }\n      } else {\n        try {\n          yield _this2.usuariosService.SendPost(data);\n          alert(\"Registration Successful\");\n        } catch (error) {\n          console.log(error);\n          alert(\"Registration Failed\");\n        }\n        _this2.checkoutForm.reset();\n      }\n    })();\n  }\n};\nCrearUsuarioComponent = __decorate([Component({\n  selector: 'app-crear-usuario',\n  templateUrl: './crear-usuario.component.html',\n  styleUrls: ['./crear-usuario.component.css']\n})], CrearUsuarioComponent);\nexport { CrearUsuarioComponent };","map":{"version":3,"mappings":"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","names":["Component","CrearUsuarioComponent","constructor","usuariosService","fb","Date","now","today","checkoutForm","group","id","nombre","apellido","numeroId","email","fechaCreacion","date","password","ngOnInit","getDataById","getUsersById","subscribe","resp","getDataForm","error","console","data","patchValue","onSubmit","usuarios","Id","value","Nombre","Apellido","NumeroId","Email","FechaCreacion","Password","log","editMode","putUsersId","usuarioId","toString","alert","SendPost","reset","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\Roberth\\UsuariosMDBK\\src\\app\\crear-usuario\\crear-usuario.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { UsuariosService } from '../servicios/usuarios.service';\n\n@Component({\n  selector: 'app-crear-usuario',\n  templateUrl: './crear-usuario.component.html',\n  styleUrls: ['./crear-usuario.component.css']\n})\nexport class CrearUsuarioComponent implements OnInit  {\n\n  checkoutForm: any;\n  today = Date.now()\n  date: Date = new Date(this.today);\n  editMode: boolean = false;\n  //usuarios: Usuarios[] = [];\n  usuarios: any;\n  usuarioId!: number;\n\n  constructor(private usuariosService: UsuariosService,\n    private fb: FormBuilder,) \n    { this.checkoutForm = this.fb.group({\n      id:0,\n      nombre: \"\",\n      apellido: \"\",\n      numeroId: \"\",\n      email: \"\",\n      fechaCreacion: this.date,\n      password: \"\"\n      \n     });\n    }\n  ngOnInit(): void {\n    \n  }\n\n  public async getDataById(id: string) {\n    //console.log(id);\n    (await this.usuariosService.getUsersById(id)).subscribe(\n      (resp: any)=> {\n      this.getDataForm(resp), \n        (error: any) => console.error(error)\n    })\n  }\n\n  getDataForm(data: any) {\n    this.checkoutForm.patchValue({\n      id: data.id,\n      nombre: data.nombre,\n      apellido: data.apellido,\n      numeroId: data.numeroId,\n      email: data.email,\n      fechaCreacion: data.fechaCreacion,\n      password: data.password,\n      \n    });\n\n}\n\nasync onSubmit(){\n\n  this.usuarios.Id = this.checkoutForm.value.id;\n  this.usuarios.Nombre = this.checkoutForm.value.nombre;\n  this.usuarios.Apellido = this.checkoutForm.value.apellido;\n  this.usuarios.NumeroId = this.checkoutForm.value.numeroId;\n  this.usuarios.Email = this.checkoutForm.value.email;\n  this.usuarios.FechaCreacion = this.checkoutForm.value.fechaCreacion;\n  this.usuarios.Password = this.checkoutForm.value.password\n\n  const data = this.checkoutForm.value;\n\n  console.log(data);\n  \n\n  //Add and Update post\n  if(this.editMode === true)\n  {   \n    try {\n      await this.usuariosService.putUsersId(this.usuarioId.toString(), data);\n    } catch (error) {\n      console.log(error);\n      alert(\"Update Failed\");\n    }\n\n  } else {\n    try {\n      await this.usuariosService.SendPost(data);\n      alert(\"Registration Successful\");\n      \n    } catch (error) {\n      console.log(error);\n      alert(\"Registration Failed\");\n    }\n    this.checkoutForm.reset();\n  }\n}\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}